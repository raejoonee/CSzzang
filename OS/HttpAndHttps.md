# HTTPμ™€ HTTPS
* λ©μ°¨
  * [HTTPμ™€ HTTPS μ°¨μ΄μ ](#httpμ™€-https-μ°¨μ΄μ )
  * [SSLκ³Ό TLS μ°¨μ΄μ ](#sslκ³Ό-tls-μ°¨μ΄μ )
  * [TLS ν†µμ‹  κ³Όμ •](#SSL/TLS-ν†µμ‹ -κ³Όμ •(λ™μ‘-λ°©μ‹))
  * [λΉ„λ€μΉ­ν‚¤/λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹](#(μ¶”κ°€)-λΉ„λ€μΉ­ν‚¤/λ€μΉ­ν‚¤-μ•”νΈν™”-λ°©μ‹)

<br />
<br />

## HTTPμ™€ HTTPS μ°¨μ΄μ 

| HTTP | HTTPS |
| :---: | :---: |
| HyperText Transfer Protocol | HyperText Transfer Protocol over Secure Socket Layer(SSL) |
| μΈν„°λ„·μ—μ„ μ‚¬μ©ν•λ” μ›Ή μ„λ²„μ™€ μ‚¬μ©μμ μΈν„°λ„· λΈλΌμ°μ € μ‚¬μ΄μ— λ¬Έμ„λ¥Ό μ „μ†΅ν•κΈ° μ„ν• ν†µμ‹  κ·μ•½ | |
| ν¬νΈλ²νΈ : 80 | ν¬νΈλ²νΈ : 443 |
| **μ•”νΈν™”κ°€ μ „ν€ λμ–΄ μμ§€ μ•μ•„**, κ·Έλƒ¥ ν…μ¤νΈ κ·Έλ€λ΅ μ „μ†΅ | μ†μΌ“ ν†µμ‹ μ—μ„ μΌλ° ν…μ¤νΈλ¥Ό μ΄μ©ν•λ” λ€μ‹ μ—, **TLS ν”„λ΅ν† μ½**μ„ ν†µν•΄ μ„Έμ… λ°μ΄ν„°λ¥Ό **μ•”νΈν™”** |
| wiresharkμ™€ κ°™μ€ ν¨ν‚·μΊ΅μ³ ν”„λ΅κ·Έλ¨μΌλ΅ ν¨ν‚·μΊ΅μ³λ¥Ό ν•΄λ³΄λ©΄ μ •λ³΄κ°€ κ·Έλ€λ΅ λ…Έμ¶λμ–΄ μλ” κ²ƒμ„ λ³Ό μ μμµλ‹λ‹¤. | ν¨ν‚·μ„ μ•”νΈν™”ν•μ—¬ μ „μ†΅ν•κΈ° λ•λ¬Έμ— ν¨ν‚·μΊ΅μ³λ¥Ό ν•΄λ³΄μ•„λ„ μ•”νΈν™”λ λ‚΄μ©λ§ λ³΄μ΄κ² λ©λ‹λ‹¤. |
| HTTPSλ³΄λ‹¤ νΈλν”½μ΄ μ κ² λ°μƒ | μ„¤μΉ λ° μΈμ¦μ„λ¥Ό μ μ§€ν•λ” λ°μ— μ¶”κ°€λΉ„μ© λ°μƒ |
| | HTTPSμ μ•”νΈν™”λ” Transport κ³„μΈµμ—μ„ μ΄λ£¨μ–΄μ§€κ² λ©λ‹λ‹¤. (TLS - Transport Layer Security : SSL3.0μ„ κΈ°λ°) |

<br/>

* λ¨λ“  μ‚¬μ΄νΈμ—μ„ HTTPSλ¥Ό μ‚¬μ©ν•κ² λλ©΄ μ„λ²„μ— κ³Όλ¶€ν™”κ°€ κ±Έλ¦΄ μ μκΈ° λ•λ¬Έμ—, λ€λ¶€λ¶„ **μ¤‘μ”ν• μ‚¬μ΄νΈλ” HTTPSλ΅ κ΄€λ¦¬ν•κ³  λ‚λ¨Έμ§€ μΌλ°μ μΈ μ‚¬μ΄νΈλ” HTTPλ΅ μ„Έν…**ν•©λ‹λ‹¤.
* ~~SSL~~μ€ κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹κ³Ό κ³µκ°ν‚¤μ λ‹¨μ μ„ λ³΄μ™„ν• λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ ν•¨κ» μ‚¬μ©ν•λ‹¤. (κ³µκ°ν‚¤ λ°©μ‹μ€ λλ¦¬λ‹¤λ” λ‹¨μ μ΄ μλ‹¤.)

<br/>

> κ³µκ°ν‚¤λ°©μ‹μΌλ΅ λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•κ³ , μ„λ΅ κ³µμ λ λ€μΉ­ν‚¤λ¥Ό κ°€μ§€κ³  ν†µμ‹ ν•κ² λλ‹¤.

<br />
<br />
<br />

## SSLκ³Ό TLS μ°¨μ΄μ 

λ€λ¶€λ¶„ HTTPμ™€ HTTPSλ¥Ό κ²€μƒ‰ν•λ©΄, HTTPSλ” HTTPμ—μ„ SSL/TLS μΈμ¦μ„ κ°λ…μ΄ λ”ν•΄μ§„ HTTPλ³΄λ‹¤ λ³΄μ•μ΄ λ” κ°•ν• ν”„λ΅ν† μ½μ΄λΌκ³  λ‚μµλ‹λ‹¤.  

κ·ΈλΌ **SSL**κ³Ό **TLS**μ μ°¨μ΄μ μ€ λ¬΄μ—‡μΌκΉμ”?

  * **SSL (Secure Sockets Layer)** : Netscape μ‚¬μ—μ„ κ°λ°
  * **TLS (Transport Layer Security)** : IETF μ‚¬μ—μ„ κ°λ°

<br />
<br />

SSLκ³Ό TLS λ¨λ‘ μ‚¬μ©μμ™€ μ›Ή λΈλΌμ°μ € κ°„ ν†µμ‹ μ„ μ•”νΈν™”ν•λ”λ° μ‚¬μ©ν•λ” ν”„λ΅ν† μ½μ…λ‹λ‹¤.  

TLSλ” SSLκ³Ό λΉ„μ·ν•λ‹¤κ³  λ³΄λ©΄ λλ”λ° TLSλ” SSL3.0μ„ κΈ°λ°μΌλ΅ κ°μ„ λ μ‹ κ· λ¨λΈ ν”„λ΅ν† μ½λ΅, **SSLμ€ λ”μ΄μƒ μ‚¬μ©λμ§€ μ•κ³  TLSκ°€ μ‚¬μ©λ©λ‹λ‹¤.**

ν•μ§€λ§ SSLμ΄λΌλ” λ‹¨μ–΄κ°€ μµμ™ν•΄μ„ SSLμ™€ TLSλΌλ” λ‹¨μ–΄κ°€ νΌμ©λμ„ μ‚¬μ©λ  λ•κ°€ λ§μ€λ°, κ·Έλƒ¥ **HTTPSμ—λ” TLSκ°€ μ‚¬μ©**λλ‹¤κ³  λ³΄λ©΄ λ©λ‹λ‹¤.  
<br/>
TLSλ” <u>**κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ¥Ό κµν™ν•μ—¬ λ³΄μ• μ„Έμ…μ„ μƒμ„±ν• ν›„ ν†µμ‹ μ„ μ•”νΈν™” ν•λ” λ°©μ‹**</u>μΌλ΅ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.  

SSLμ™€ TLSλ” TCP/IP λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•λ” ν†µμ‹ μ— μ μ©λλ©°, ν†µμ‹  κ³Όμ •μ—μ„ μ „μ†΅κ³„μΈµ μΆ…λ‹¨ κ°„ λ³΄μ•κ³Ό λ°μ΄ν„° <u>λ¬΄κ²°μ„±</u>μ„ ν™•λ³΄ν•  μ μκ² ν•©λ‹λ‹¤.

<u>λ¬΄κ²°μ„±</u> : μ •λ³΄κ°€ λ³€ν•λμ§€ μ•κ³  κ·Έλ€λ΅ μ „λ‹¬λλ” μ„±μ§

<br />

---

<br />

## SSL/TLS ν†µμ‹  κ³Όμ •(λ™μ‘ λ°©μ‹)

<img src="./image/TLS.png" width=1000 />

<br />
<br />

### π¤ handshake π¤

* handshakeλ” μ‹¤μ λ΅ μ•”νΈν™” μμ²΄λ¥Ό μν–‰ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, κ³µμ λλ” λΉ„λ°€ λ° μ‚¬μ©λ  μ•”νΈν™” μ ν•μ„ κ²°μ •ν•λ” μ μ°¨λ¥Ό μ§„ν–‰ν•©λ‹λ‹¤.
* μ•”νΈν™”λ HTTP λ©”μ‹μ§€λ¥Ό κµν™ν•κΈ° μ „μ— Clientμ™€ Serverλ” SSL ν•Έλ“μ‰μ΄ν¬λ¥Ό μ§„ν–‰ν•λ‹¤.
* Handshakeμ λ©μ 
  + ν”„λ΅ν† μ½ λ²„μ „ λ²νΈ κµν™
  + μ–‘μ½μ΄ μ•κ³  μλ” pre-master secret key μƒμ„± λ° κµν™
  + μ–‘μ½μ μ‹ μ› μΈμ¦
  + μ±„λ„μ„ μ•”νΈν™” ν•κΈ° μ„ν• μ„μ‹ μ„Έμ…ν‚¤ μƒμ„±

<br />
<br />

**1. Client Hello π‘‹**
  * μ΄ λ©”μ‹μ§€μ—λ” clientμ—μ„ κ°€λ¥ν• TLS λ²„μ „, μ„λ²„ λ„λ©”μΈ, μ„Έμ… μ‹λ³„μ, μ•”νΈ μ„¤μ • λ“±μ μ •λ³΄κ°€ ν¬ν•¨λλ‹¤.
  * clientκ°€ μƒμ„±ν• λλ¤ λ°μ΄ν„° Aλ„ μ „μ†΅λλ‹¤.

**2. Server Hello π‘‹**
  * μ΄ λ©”μ‹μ§€μ—λ” Client Hello λ©”μ‹μ§€μ μ •λ³΄ μ¤‘ Serverμ—μ„ μ‚¬μ©ν•κΈ°λ΅ κ²°μ •ν• TLS λ²„μ „, μ„Έμ… μ‹λ³„μ, μ•”νΈ μ„¤μ • λ“±μ μ •λ³΄κ°€ ν¬ν•¨λλ‹¤.
  * Serverκ°€ μƒμ„±ν• λλ¤ λ°μ΄ν„° Bλ„ μ „μ†΅λλ‹¤.

**3. Certificate Message π“©**
  * κ³µκ°ν‚¤(RSA μ•”νΈμ©)κ°€ ν¬ν•¨λ μ„λ²„ μΈμ¦μ„ μ „μ†΅
  * μ΄ μΈμ¦μ„λ” CAμ—μ„ λ°κΈ‰λ°›μ€ κ²ƒμ΄λ©°, Serverκ°€ μ‹ λΆ°ν•  μ μλ” μ μ„μ„ μΈμ¦ν•©λ‹λ‹¤.
    + CA(Certificate Authority) : λ””μ§€ν„Έ μΈμ¦μ„λ¥Ό μ κ³µν•λ” κ³µμΈλ κΈ°μ—…
  * μ „μ†΅μ΄ λλ‚λ©΄ Server Hello Done λ©”μ‹μ§€ μ „λ‹¬

**4. μΈμ¦μ„ ν™•μΈ, pre-master secret key μ•”νΈν™” π”**
  * Clientλ” Serverμ—κ² μ „λ‹¬λ°›μ€ μΈμ¦μ„λ¥Ό κ²€μ¦ν•©λ‹λ‹¤.  
    (μ ν¨κΈ°κ°„μ΄ λ§λ£λμ§€ μ•μ•λ”μ§€, μ‹ λΆ°ν•  μ μλ” μΈμ¦ κΈ°κ΄€μ—μ„ λ°κΈ‰λμ—λ”μ§€, κ·Έ μΈμ¦μ„κ°€ ν•΄λ‹Ή μ„λ²„μ—κ² λ°κΈ‰λ μΈμ¦μ„κ°€ λ§λ”μ§€ λ“±μ„ ν™•μΈν•©λ‹λ‹¤)
  * Clientλ” λλ¤ λ°μ΄ν„° Aμ™€ Bλ¥Ό μ΅°ν•©ν•΄μ„ μ„Έμ…ν‚¤(λ€μΉ­ν‚¤)λ΅ μ‚¬μ©λ  μ„μμ pre-master secret keyλ¥Ό μƒμ„±ν• λ’¤, Serverκ°€ λ³΄λ‚Έ μΈμ¦μ„μ— ν¬ν•¨λ κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ pre-master secret keyλ¥Ό μ•”νΈν™” ν•©λ‹λ‹¤.
  
**5. Client Key Exchange π”‘**
  * κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ pre-master secret key μ „μ†΅

**6. pre-master secret key λ³µνΈν™”, Session Key (λ€μΉ­ν‚¤) μƒμ„± π”‘**
  * Clientμ—κ² λ°›μ€ μ•”νΈν™”λ pre-master secret keyλ¥Ό Server μμ‹ λ§ μ•κ³  μλ” κ°μΈν‚¤λ΅ λ³µνΈν™”ν•μ—¬ pre-master secret keyλ¥Ό μ–»μ–΄λ‚΄κ³ , μ΄κ²ƒμ„ μ΄μ©ν•΄μ„ master secret keyλ¥Ό μƒμ„±ν•΄λƒ…λ‹λ‹¤.
  * μ΄ master secret keyλ¥Ό ν†µν•΄ Session Key (λ€μΉ­ν‚¤)λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
  * μ΄ μ„Έμ…ν‚¤(λ€μΉ­ν‚¤)λ” μ•μΌλ΅ Serverμ™€ Client κ°„μ ν†µμ‹ μ„ μ•”νΈν™”ν•λ” λ° μ‚¬μ©λ  κ²ƒμ…λ‹λ‹¤.
  * Client λν• κ°™μ€ pre-master secret keyλ¥Ό μ‚¬μ©ν•μ—¬ Serverμ™€ κ°™μ€ Session Keyλ¥Ό κ°€μ§€κ² λ©λ‹λ‹¤. ( λ€μΉ­ ν‚¤ )

**7. Change Cipher Spec π“© π“¬**
  * μ„λ΅μ—κ² μ•μΌλ΅ λ¨λ“  ν†µμ‹  λ‚΄μ©μ€ μ„Έμ…ν‚¤(λ€μΉ­ν‚¤)λ΅ μ•”νΈν™”ν•μ—¬ ν†µμ‹ ν•  κ²ƒμ΄λΌκ³  λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄ μ•λ ¤μ¤λ‹λ‹¤.
  
**8. Finished π—£ π™**
  * κ·Έλ¦¬κ³  λ‚μ„ Finished λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄ κ°μμ Handshake κ³Όμ •μ΄ λλ‚¬μμ„ μ•λ¦½λ‹λ‹¤.

<br />
<br />

### session
μ΄ν›„ μ„Έμ…ν‚¤λ¥Ό ν™μ©ν• λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ **Serverμ™€ Client**κ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μµλ‹λ‹¤.

<br />
<br />

### end session
λ°μ΄ν„°μ μ „μ†΅μ΄ λλ‚λ©΄ SSLν†µμ‹ μ΄ λλ‚¬μμ„ μ„λ΅μ—κ² μ•λ ¤μ¤λ‹λ‹¤.   
μ΄λ•, μ„Έμ…ν‚¤π”‘λ¥Ό νκΈ°ν•©λ‹λ‹¤.

<br />
<br />

> κ³µκ°ν‚¤ μ•”νΈλ°©μ‹(λΉ„λ€μΉ­ μ•”νΈν™”)μ€ λ€μΉ­ν‚¤ λ°©μ‹λ³΄λ‹¤ μ•μ „ν•μ§€λ§, μ–΄λ ¤μ΄ μν•™μ  λ¬Έμ λ¥Ό μλ°ν•κΈ° λ•λ¬Έμ— κ³Όμ •μ΄ λ³µμ΅ν•κ³   
> κ·Έλ§νΌ μ‹κ°„λ„ μ¤λ κ±Έλ¦΄ λΏλ§ μ•„λ‹λΌ λ§μ€ μ»΄ν“¨ν… λ¦¬μ†μ¤λ¥Ό ν•„μ”λ΅ ν•©λ‹λ‹¤.  
> λ§μ•½ μ»¤λ®¤λ‹μΌ€μ΄μ… session μƒμ λ¨λ“  μ •λ³΄λ¥Ό λ‹¤ λΉ„λ€μΉ­ μ•”νΈν™”λ¥Ό μ‚¬μ©ν•΄ μ•”νΈν™”ν•λ ¤ ν•λ‹¤λ©΄ μ»΄ν“¨ν„°κ°€ λ²„ν…¨λ‚΄μ§€ λ»ν•  κ²ƒμ…λ‹λ‹¤.  
> κ·Έλμ„ TLSλ” μ»¤λ®¤λ‹μΌ€μ΄μ… μ„Έμ… μ‹μ‘λ¶€λ¶„μ—λ§ λΉ„λ€μΉ­ μ•”νΈν™”λ¥Ό μ‚¬μ©ν•μ—¬ μ΄ λ¬Έμ λ¥Ό ν”Όν–μµλ‹λ‹¤.  
>   
> λ”°λΌμ„ λ…Έμ¶λλ©΄ ν°μΌλ‚λ” λ€μΉ­ν‚¤λ¥Ό λ§λ“¤μ–΄ μ£Όκ³ λ°›λ” κ³Όμ •μ€ κ³µκ°ν‚¤ μ•”νΈλ°©μ‹μ„ μ΄μ©ν•κ³ ,  
> μ£Όκ³ λ°›μ€ λ€μΉ­ν‚¤λ΅ ν†µμ‹ μ΄ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.  

<br />

---

<br />

## (μ¶”κ°€) λΉ„λ€μΉ­ν‚¤/λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹

λ¨Όμ €, κ³µκ°ν‚¤/κ°μΈν‚¤ μ•”νΈν™” λ°©μ‹(λΉ„λ€μΉ­ν‚¤ λ°©μ‹)μ„ κ°„λ‹¨ν•κ² μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.
<br/>
Aμ™€ Bμ κ³µκ°ν‚¤κ°€ κ°κ° PUa, PUbλΌκ³  ν•κ³ , κ°μΈν‚¤κ°€ κ°κ° PRa, PRbλΌκ³  ν•  λ•, Aκ°€ Bμ κ³µκ°ν‚¤ PUbλ΅ μ•”νΈν™”ν• κ²ƒμ€ Bλ§ μ•κ³  μλ” κ°μΈν‚¤ PRbλ΅λ§ λ³µνΈν™”κ°€ κ°€λ¥ν•©λ‹λ‹¤.  

λ§μ°¬κ°€μ§€λ΅ Bκ°€ Aμ κ³µκ°ν‚¤ PUaλ΅ μ•”νΈν™”ν• κ²ƒμ€ Aλ§ μ•κ³  μλ” κ°μΈν‚¤ PRaλ΅λ§ λ³µνΈν™”κ°€ κ°€λ¥ν•©λ‹λ‹¤.  

λ°λ€λ΅ μƒκ°ν•λ©΄ Aκ°€ μμ‹ λ§ μ•κ³  μλ” κ°μΈν‚¤ PRaλ΅ μ•”νΈν™” ν•λ‹¤λ©΄, λ¨λ“  μ‚¬λλ“¤μ€ Aμ κ³µκ°ν‚¤μΈ PUaλ΅ λ³µνΈν™”ν•μ—¬ Aκ°€ μ•”νΈν™”ν• κ²ƒμ„ λ³Ό μ μμµλ‹λ‹¤.
<br/>
<br/>
κ·ΈλΌ μ™ λ¨λ“  μ‚¬λλ“¤μ΄ λ³Ό μ μλ„λ΅ **κ°μΈν‚¤π”‘**λ΅ μ•”νΈν™”π” ν• κΉμ”?
<br/>
<br/>
μ΄λ” λ³΄μ•μ κΈ°λ¥μ΄ μ•„λ‹, **μμ‹ μ„ μΈμ¦ν•  μ μλ” ν•λ‚μ λ°©μ‹**μ΄ λκΈ° λ•λ¬Έμ…λ‹λ‹¤.  

λ”°λΌμ„ κ°μΈν‚¤λ΅ μ•”νΈν™” ν•λ” μλ΅ μ „μ μ„λ…μ„ λ“¤ μ μμµλ‹λ‹¤.
<br/>
SSL/TLS λ™μ‘ λ°©μ‹μ—μ„λ„ Serverκ°€ Clientμ—κ² μΈμ¦μ„μ™€ ν•¨κ» κ±΄λ‚΄μ¤€ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ Clientλ” κ·Έ μΈμ¦μ„κ°€ μ‹ λΆ°λ°›λ” κΈ°κ΄€μ—μ„ Serverμ—κ² μ¤€ κ²ƒμ΄λΌλ” κ²ƒμ„ κ²€μ¦ν•  μ μλ” κ²ƒμ…λ‹λ‹¤.  
κ·Έλ¦¬κ³  Clientκ°€ λ€μΉ­ν‚¤λ¥Ό λ§λ“λ”λ° ν™μ©λλ” pre-master secret keyλ¥Ό κ·Έ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•κ² λλ©΄, μ΄κ²ƒμ€ Serverλ§ μ•κ³  μλ” κ°μΈν‚¤λ΅λ§ λ³µνΈν™”ν•  μ μκ² λ©λ‹λ‹¤.

κ·Έλ ‡κ² ν•΄μ„ pre-master secret keyλ” Serverμ™€ Clientλ§ μ• μ μλ„λ΅ λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ μ£Όκ³ λ°›κ² λλ” κ²ƒμ…λ‹λ‹¤.
<br/>
μ΄λ ‡κ² μ£Όκ³  λ°›μ€ pre-master secret keyλ¥Ό ν†µν•΄ Serverμ™€ Clientκ°€ κ°κ° κ°™μ€ Session Keyλ¥Ό μƒμ„±ν•  μ μκ² λκ³ , μ΄ μ„Έμ…ν‚¤λ¥Ό μ΄μ©ν• μ•”νΈν™” λ°©μ‹(λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹)μ„ ν†µν•΄ ν†µμ‹ μ„ μ΄λ£¨κ² λ©λ‹λ‹¤.

<br />
<br />
<br />
<br />

> **Reference**  
> * dany-it.tistory.com/96?category=286604  
> * blog.naver.com/PostView.nhn?blogId=sung_mk1919&logNo=221598350824&categoryNo=0&parentCategoryNo=0&viewDate=&currentPage=1&postListTopCurrentPage=1&from=postView  
> * wayhome25.github.io/cs/2018/03/11/ssl-https/  
> * naleejang.tistory.com/216  
